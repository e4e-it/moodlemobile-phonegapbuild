{"version":3,"sources":["../../src/addon/mod/data/pages/entry/entry.module.ts","../../src/addon/mod/data/pages/entry/entry.ts"],"names":[],"mappings":"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","file":"90.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CoreDirectivesModule } from '@directives/directives.module';\r\nimport { CoreComponentsModule } from '@components/components.module';\r\nimport { CoreCommentsComponentsModule } from '@core/comments/components/components.module';\r\nimport { CoreCompileHtmlComponentModule } from '@core/compile/components/compile-html/compile-html.module';\r\nimport { AddonModDataComponentsModule } from '../../components/components.module';\r\nimport { AddonModDataEntryPage } from './entry';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AddonModDataEntryPage,\r\n    ],\r\n    imports: [\r\n        CoreDirectivesModule,\r\n        CoreComponentsModule,\r\n        AddonModDataComponentsModule,\r\n        CoreCompileHtmlComponentModule,\r\n        CoreCommentsComponentsModule,\r\n        IonicPageModule.forChild(AddonModDataEntryPage),\r\n        TranslateModule.forChild()\r\n    ],\r\n})\r\nexport class AddonModDataEntryPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/data/pages/entry/entry.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, ViewChild, OnDestroy } from '@angular/core';\r\nimport { Content, IonicPage, NavParams, NavController } from 'ionic-angular';\r\nimport { CoreUtilsProvider } from '@providers/utils/utils';\r\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\r\nimport { CoreSitesProvider } from '@providers/sites';\r\nimport { CoreGroupsProvider } from '@providers/groups';\r\nimport { CoreEventsProvider } from '@providers/events';\r\nimport { CoreCourseProvider } from '@core/course/providers/course';\r\nimport { AddonModDataProvider } from '../../providers/data';\r\nimport { AddonModDataHelperProvider } from '../../providers/helper';\r\nimport { AddonModDataOfflineProvider } from '../../providers/offline';\r\nimport { AddonModDataSyncProvider } from '../../providers/sync';\r\nimport { AddonModDataFieldsDelegate } from '../../providers/fields-delegate';\r\nimport { AddonModDataComponentsModule } from '../../components/components.module';\r\n\r\n/**\r\n * Page that displays the view entry page.\r\n */\r\n@IonicPage({ segment: 'addon-mod-data-entry' })\r\n@Component({\r\n    selector: 'page-addon-mod-data-entry',\r\n    templateUrl: 'entry.html',\r\n})\r\nexport class AddonModDataEntryPage implements OnDestroy {\r\n    @ViewChild(Content) content: Content;\r\n\r\n    protected module: any;\r\n    protected entryId: number;\r\n    protected courseId: number;\r\n    protected page: number;\r\n    protected syncObserver: any; // It will observe the sync auto event.\r\n    protected entryChangedObserver: any; // It will observe the changed entry event.\r\n    protected fields = {};\r\n\r\n    title = '';\r\n    moduleName = 'data';\r\n    component = AddonModDataProvider.COMPONENT;\r\n    entryLoaded = false;\r\n    selectedGroup = 0;\r\n    entry: any;\r\n    offlineActions = [];\r\n    hasOffline = false;\r\n    cssTemplate = '';\r\n    previousId: number;\r\n    nextId: number;\r\n    access: any;\r\n    data: any;\r\n    groupInfo: any;\r\n    showComments: any;\r\n    entryRendered = '';\r\n    siteId: string;\r\n    cssClass = '';\r\n    extraImports = [AddonModDataComponentsModule];\r\n    jsData;\r\n\r\n    constructor(params: NavParams, protected utils: CoreUtilsProvider, protected groupsProvider: CoreGroupsProvider,\r\n            protected domUtils: CoreDomUtilsProvider, protected fieldsDelegate: AddonModDataFieldsDelegate,\r\n            protected courseProvider: CoreCourseProvider, protected dataProvider: AddonModDataProvider,\r\n            protected dataOffline: AddonModDataOfflineProvider, protected dataHelper: AddonModDataHelperProvider,\r\n            sitesProvider: CoreSitesProvider, protected navCtrl: NavController,\r\n            protected eventsProvider: CoreEventsProvider) {\r\n        this.module = params.get('module') || {};\r\n        this.entryId = params.get('entryId') || null;\r\n        this.courseId = params.get('courseId');\r\n        this.selectedGroup = params.get('group') || 0;\r\n        this.page = params.get('page') || null;\r\n\r\n        this.siteId = sitesProvider.getCurrentSiteId();\r\n\r\n        this.title = this.module.name;\r\n        this.moduleName = this.courseProvider.translateModuleName('data');\r\n    }\r\n\r\n    /**\r\n     * View loaded.\r\n     */\r\n    ionViewDidLoad(): void {\r\n        this.fetchEntryData();\r\n\r\n        // Refresh data if this discussion is synchronized automatically.\r\n        this.syncObserver = this.eventsProvider.on(AddonModDataSyncProvider.AUTO_SYNCED, (data) => {\r\n            if ((data.entryId == this.entryId || data.offlineEntryId == this.entryId) && this.data.id == data.dataId) {\r\n                if (data.deleted) {\r\n                    // If deleted, go back.\r\n                    this.navCtrl.pop();\r\n                } else {\r\n                    this.entryId = data.entryid;\r\n                    this.entryLoaded = false;\r\n                    this.fetchEntryData(true);\r\n                }\r\n            }\r\n        }, this.siteId);\r\n\r\n        // Refresh entry on change.\r\n        this.entryChangedObserver = this.eventsProvider.on(AddonModDataProvider.ENTRY_CHANGED, (data) => {\r\n            if (data.entryId == this.entryId && this.data.id == data.dataId) {\r\n                if (data.deleted) {\r\n                    // If deleted, go back.\r\n                    this.navCtrl.pop();\r\n                } else {\r\n                    this.entryLoaded = false;\r\n                    this.fetchEntryData(true);\r\n                }\r\n            }\r\n        }, this.siteId);\r\n    }\r\n\r\n    /**\r\n     * Fetch the entry data.\r\n     *\r\n     * @param  {boolean}      refresh If refresh the current data or not.\r\n     * @return {Promise<any>}         Resolved when done.\r\n     */\r\n    protected fetchEntryData(refresh?: boolean): Promise<any> {\r\n        let fieldsArray;\r\n\r\n        return this.dataProvider.getDatabase(this.courseId, this.module.id).then((data) => {\r\n            this.title = data.name || this.title;\r\n            this.data = data;\r\n            this.cssClass = 'addon-data-entries-' + data.id;\r\n\r\n            return this.setEntryIdFromPage(data.id, this.page, this.selectedGroup).then(() => {\r\n                return this.dataProvider.getDatabaseAccessInformation(data.id);\r\n            });\r\n        }).then((accessData) => {\r\n            this.access = accessData;\r\n\r\n            return this.groupsProvider.getActivityGroupInfo(this.data.coursemodule, accessData.canmanageentries)\r\n                    .then((groupInfo) => {\r\n                this.groupInfo = groupInfo;\r\n\r\n                // Check selected group is accessible.\r\n                if (groupInfo && groupInfo.groups && groupInfo.groups.length > 0) {\r\n                    if (!groupInfo.groups.some((group) => this.selectedGroup == group.id)) {\r\n                        this.selectedGroup = groupInfo.groups[0].id;\r\n                    }\r\n                }\r\n\r\n                return this.dataOffline.getEntryActions(this.data.id, this.entryId);\r\n            });\r\n        }).then((actions) => {\r\n            this.offlineActions = actions;\r\n            this.hasOffline = !!actions.length;\r\n\r\n            return this.dataProvider.getFields(this.data.id).then((fieldsData) => {\r\n                this.fields = this.utils.arrayToObject(fieldsData, 'id');\r\n\r\n                return this.dataHelper.getEntry(this.data, this.entryId, this.offlineActions);\r\n            });\r\n        }).then((entry) => {\r\n            entry = entry.entry;\r\n            this.cssTemplate = this.dataHelper.prefixCSS(this.data.csstemplate, '.' + this.cssClass);\r\n\r\n            // Index contents by fieldid.\r\n            entry.contents = this.utils.arrayToObject(entry.contents, 'fieldid');\r\n\r\n            fieldsArray = this.utils.objectToArray(this.fields);\r\n\r\n            return this.dataHelper.applyOfflineActions(entry, this.offlineActions, fieldsArray);\r\n        }).then((entryData) => {\r\n            this.entry = entryData;\r\n\r\n            const actions = this.dataHelper.getActions(this.data, this.access, this.entry);\r\n\r\n            this.entryRendered = this.dataHelper.displayShowFields(this.data.singletemplate, fieldsArray,\r\n                    this.entry, 'show', actions);\r\n            this.showComments = actions.comments;\r\n\r\n            const entries = {};\r\n            entries[this.entryId] = this.entry;\r\n\r\n            // Pass the input data to the component.\r\n            this.jsData = {\r\n                fields: this.fields,\r\n                entries: entries,\r\n                data: this.data\r\n            };\r\n\r\n            return this.dataHelper.getPageInfoByEntry(this.data.id, this.entryId, this.selectedGroup).then((result) => {\r\n                this.previousId = result.previousId;\r\n                this.nextId = result.nextId;\r\n            });\r\n        }).catch((message) => {\r\n            if (!refresh) {\r\n                // Some call failed, retry without using cache since it might be a new activity.\r\n                return this.refreshAllData();\r\n            }\r\n\r\n            this.domUtils.showErrorModalDefault(message, 'core.course.errorgetmodule', true);\r\n        }).finally(() => {\r\n            this.domUtils.scrollToTop(this.content);\r\n            this.entryLoaded = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Go to selected entry without changing state.\r\n     *\r\n     * @param  {number}       entry Entry Id where to go.\r\n     * @return {Promise<any>}       Resolved when done.\r\n     */\r\n    gotoEntry(entry: number): Promise<any> {\r\n        this.entryId = entry;\r\n        this.page = null;\r\n        this.entryLoaded = false;\r\n\r\n        return this.fetchEntryData();\r\n    }\r\n\r\n    /**\r\n     * Refresh all the data.\r\n     *\r\n     * @return {Promise<any>} Promise resolved when done.\r\n     */\r\n    protected refreshAllData(): Promise<any> {\r\n        const promises = [];\r\n\r\n        promises.push(this.dataProvider.invalidateDatabaseData(this.courseId));\r\n        if (this.data) {\r\n            promises.push(this.dataProvider.invalidateEntryData(this.data.id, this.entryId));\r\n            promises.push(this.groupsProvider.invalidateActivityGroupInfo(this.data.coursemodule));\r\n            promises.push(this.dataProvider.invalidateEntriesData(this.data.id));\r\n        }\r\n\r\n        return Promise.all(promises).finally(() => {\r\n            return this.fetchEntryData(true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Refresh the data.\r\n     *\r\n     * @param {any} [refresher] Refresher.\r\n     * @return {Promise<any>} Promise resolved when done.\r\n     */\r\n    refreshDatabase(refresher?: any): Promise<any> {\r\n        if (this.entryLoaded) {\r\n            return this.refreshAllData().finally(() => {\r\n                refresher && refresher.complete();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set group to see the database.\r\n     *\r\n     * @param  {number}       groupId Group identifier to set.\r\n     * @return {Promise<any>}         Resolved when done.\r\n     */\r\n    setGroup(groupId: number): Promise<any> {\r\n        this.selectedGroup = groupId;\r\n        this.entryLoaded = false;\r\n\r\n        return this.setEntryIdFromPage(this.data.id, 0, this.selectedGroup).then(() => {\r\n            return this.fetchEntryData();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Convenience function to translate page number to entry identifier.\r\n     *\r\n     * @param  {number}       dataId       Data Id.\r\n     * @param  {number}       [pageNumber] Page number where to go\r\n     * @param  {number}       group        Group Id to get the entry.\r\n     * @return {Promise<any>}              Resolved when done.\r\n     */\r\n    protected setEntryIdFromPage(dataId: number, pageNumber?: number, group?: number): Promise<any> {\r\n        if (typeof pageNumber == 'number') {\r\n            return this.dataHelper.getPageInfoByPage(dataId, pageNumber, group).then((result) => {\r\n                this.entryId = result.entryId;\r\n                this.page = null;\r\n            });\r\n        }\r\n\r\n        return Promise.resolve();\r\n    }\r\n\r\n    /**\r\n     * Component being destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n        this.syncObserver && this.syncObserver.off();\r\n        this.entryChangedObserver && this.entryChangedObserver.off();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/data/pages/entry/entry.ts"],"sourceRoot":""}