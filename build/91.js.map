{"version":3,"sources":["../../src/addon/mod/data/pages/edit/edit.module.ts","../../src/addon/mod/data/pages/edit/edit.ts"],"names":[],"mappings":"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","file":"91.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CoreDirectivesModule } from '@directives/directives.module';\r\nimport { CoreComponentsModule } from '@components/components.module';\r\nimport { CoreCommentsComponentsModule } from '@core/comments/components/components.module';\r\nimport { CoreCompileHtmlComponentModule } from '@core/compile/components/compile-html/compile-html.module';\r\nimport { AddonModDataComponentsModule } from '../../components/components.module';\r\nimport { AddonModDataEditPage } from './edit';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AddonModDataEditPage,\r\n    ],\r\n    imports: [\r\n        CoreDirectivesModule,\r\n        CoreComponentsModule,\r\n        AddonModDataComponentsModule,\r\n        CoreCompileHtmlComponentModule,\r\n        CoreCommentsComponentsModule,\r\n        IonicPageModule.forChild(AddonModDataEditPage),\r\n        TranslateModule.forChild()\r\n    ],\r\n})\r\nexport class AddonModDataEditPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/data/pages/edit/edit.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, ViewChild } from '@angular/core';\r\nimport { Content, IonicPage, NavParams, NavController } from 'ionic-angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { FormGroup } from '@angular/forms';\r\nimport { CoreUtilsProvider } from '@providers/utils/utils';\r\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\r\nimport { CoreSitesProvider } from '@providers/sites';\r\nimport { CoreGroupsProvider } from '@providers/groups';\r\nimport { CoreEventsProvider } from '@providers/events';\r\nimport { CoreFileUploaderProvider } from '@core/fileuploader/providers/fileuploader';\r\nimport { CoreCourseProvider } from '@core/course/providers/course';\r\nimport { AddonModDataProvider } from '../../providers/data';\r\nimport { AddonModDataHelperProvider } from '../../providers/helper';\r\nimport { AddonModDataOfflineProvider } from '../../providers/offline';\r\nimport { AddonModDataFieldsDelegate } from '../../providers/fields-delegate';\r\nimport { AddonModDataComponentsModule } from '../../components/components.module';\r\n\r\n/**\r\n * Page that displays the view edit page.\r\n */\r\n@IonicPage({ segment: 'addon-mod-data-edit' })\r\n@Component({\r\n    selector: 'page-addon-mod-data-edit',\r\n    templateUrl: 'edit.html',\r\n})\r\nexport class AddonModDataEditPage {\r\n    @ViewChild(Content) content: Content;\r\n\r\n    protected module: any;\r\n    protected courseId: number;\r\n    protected data: any;\r\n    protected entryId: number;\r\n    protected entry: any;\r\n    protected offlineActions = [];\r\n    protected fields = {};\r\n    protected fieldsArray = [];\r\n    protected siteId: string;\r\n    protected offline: boolean;\r\n    protected forceLeave = false; // To allow leaving the page without checking for changes.\r\n\r\n    title = '';\r\n    component = AddonModDataProvider.COMPONENT;\r\n    loaded = false;\r\n    selectedGroup = 0;\r\n    cssClass = '';\r\n    cssTemplate = '';\r\n    groupInfo: any;\r\n    editFormRender = '';\r\n    editForm: FormGroup;\r\n    extraImports = [AddonModDataComponentsModule];\r\n    jsData: any;\r\n    errors = {};\r\n\r\n    constructor(params: NavParams, protected utils: CoreUtilsProvider, protected groupsProvider: CoreGroupsProvider,\r\n            protected domUtils: CoreDomUtilsProvider, protected fieldsDelegate: AddonModDataFieldsDelegate,\r\n            protected courseProvider: CoreCourseProvider, protected dataProvider: AddonModDataProvider,\r\n            protected dataOffline: AddonModDataOfflineProvider, protected dataHelper: AddonModDataHelperProvider,\r\n            sitesProvider: CoreSitesProvider, protected navCtrl: NavController, protected translate: TranslateService,\r\n            protected eventsProvider: CoreEventsProvider, protected fileUploaderProvider: CoreFileUploaderProvider) {\r\n        this.module = params.get('module') || {};\r\n        this.entryId = params.get('entryId') || null;\r\n        this.courseId = params.get('courseId');\r\n        this.selectedGroup = params.get('group') || 0;\r\n\r\n        this.siteId = sitesProvider.getCurrentSiteId();\r\n\r\n        this.title = this.module.name;\r\n\r\n        this.editForm = new FormGroup({});\r\n    }\r\n\r\n    /**\r\n     * View loaded.\r\n     */\r\n    ionViewDidLoad(): void {\r\n        this.fetchEntryData();\r\n    }\r\n\r\n    /**\r\n     * Check if we can leave the page or not and ask to confirm the lost of data.\r\n     *\r\n     * @return {boolean | Promise<void>} Resolved if we can leave it, rejected if not.\r\n     */\r\n    ionViewCanLeave(): boolean | Promise<void> {\r\n        if (this.forceLeave) {\r\n            return true;\r\n        }\r\n\r\n        const inputData = this.editForm.value;\r\n\r\n        return this.dataHelper.hasEditDataChanged(inputData, this.fieldsArray, this.data.id,\r\n                this.entry.contents).then((changed) => {\r\n            if (!changed) {\r\n                return Promise.resolve();\r\n            }\r\n\r\n            // Show confirmation if some data has been modified.\r\n            return  this.domUtils.showConfirm(this.translate.instant('core.confirmcanceledit'));\r\n        }).then(() => {\r\n            // Delete the local files from the tmp folder.\r\n            return this.dataHelper.getEditTmpFiles(inputData, this.fieldsArray, this.data.id,\r\n                    this.entry.contents).then((files) => {\r\n                this.fileUploaderProvider.clearTmpFiles(files);\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Fetch the entry data.\r\n     *\r\n     * @return {Promise<any>}         Resolved when done.\r\n     */\r\n    protected fetchEntryData(): Promise<any> {\r\n        return this.dataProvider.getDatabase(this.courseId, this.module.id).then((data) => {\r\n            this.title = data.name || this.title;\r\n            this.data = data;\r\n            this.cssClass = 'addon-data-entries-' + data.id;\r\n\r\n            return this.dataProvider.getDatabaseAccessInformation(data.id);\r\n        }).then((accessData) => {\r\n            this.cssTemplate = this.dataHelper.prefixCSS(this.data.csstemplate, '.' + this.cssClass);\r\n\r\n            if (this.entryId) {\r\n                return this.groupsProvider.getActivityGroupInfo(this.data.coursemodule, accessData.canmanageentries)\r\n                        .then((groupInfo) => {\r\n                    this.groupInfo = groupInfo;\r\n\r\n                    // Check selected group is accessible.\r\n                    if (groupInfo && groupInfo.groups && groupInfo.groups.length > 0) {\r\n                        if (!groupInfo.groups.some((group) => this.selectedGroup == group.id)) {\r\n                            this.selectedGroup = groupInfo.groups[0].id;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }).then(() => {\r\n            return this.dataOffline.getEntryActions(this.data.id, this.entryId);\r\n        }).then((actions) => {\r\n            this.offlineActions = actions;\r\n\r\n            return this.dataProvider.getFields(this.data.id);\r\n        }).then((fieldsData) => {\r\n            this.fieldsArray = fieldsData;\r\n            this.fields = this.utils.arrayToObject(fieldsData, 'id');\r\n\r\n            return this.dataHelper.getEntry(this.data, this.entryId, this.offlineActions);\r\n        }).then((entry) => {\r\n             if (entry) {\r\n                entry = entry.entry;\r\n\r\n                // Index contents by fieldid.\r\n                entry.contents = this.utils.arrayToObject(entry.contents, 'fieldid');\r\n            } else {\r\n                entry = {\r\n                    contents: {}\r\n                };\r\n            }\r\n\r\n            return this.dataHelper.applyOfflineActions(entry, this.offlineActions, this.fieldsArray);\r\n        }).then((entryData) => {\r\n            this.entry = entryData;\r\n\r\n            this.editFormRender = this.displayEditFields();\r\n        }).catch((message) => {\r\n            this.domUtils.showErrorModalDefault(message, 'core.course.errorgetmodule', true);\r\n        }).finally(() => {\r\n            this.loaded = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Saves data.\r\n     *\r\n     * @return {Promise<any>} Resolved when done.\r\n     */\r\n    save(): Promise<any> {\r\n        const inputData = this.editForm.value;\r\n\r\n        return this.dataHelper.hasEditDataChanged(inputData, this.fieldsArray, this.data.id,\r\n                this.entry.contents).then((changed) => {\r\n\r\n            if (!changed) {\r\n                if (this.entryId) {\r\n                    return this.returnToEntryList();\r\n                }\r\n\r\n                // New entry, no changes means no field filled, warn the user.\r\n                return Promise.reject('addon.mod_data.emptyaddform');\r\n            }\r\n\r\n            const modal = this.domUtils.showModalLoading('core.sending', true);\r\n\r\n            // Create an ID to assign files.\r\n            const entryTemp = this.entryId ? this.entryId : - (new Date().getTime());\r\n\r\n            return this.dataHelper.getEditDataFromForm(inputData, this.fieldsArray, this.data.id, entryTemp, this.entry.contents,\r\n                this.offline).catch((e) => {\r\n                    if (!this.offline) {\r\n                        // Cannot submit in online, prepare for offline usage.\r\n                        this.offline = true;\r\n\r\n                        return this.dataHelper.getEditDataFromForm(inputData, this.fieldsArray, this.data.id, entryTemp,\r\n                            this.entry.contents, this.offline);\r\n                    }\r\n\r\n                    return Promise.reject(e);\r\n            }).then((editData) => {\r\n                if (editData.length > 0) {\r\n                    if (this.entryId) {\r\n                        return this.dataProvider.editEntry(this.data.id, this.entryId, this.courseId, editData, this.fields,\r\n                            undefined, this.offline);\r\n                    }\r\n\r\n                    return this.dataProvider.addEntry(this.data.id, entryTemp, this.courseId, editData, this.selectedGroup,\r\n                        this.fields, undefined, this.offline);\r\n                }\r\n\r\n                return false;\r\n            }).then((result: any) => {\r\n                if (!result) {\r\n                    // No field filled, warn the user.\r\n                    return Promise.reject('addon.mod_data.emptyaddform');\r\n                }\r\n\r\n                // This is done if entry is updated when editing or creating if not.\r\n                if ((this.entryId && result.updated) || (!this.entryId && result.newentryid)) {\r\n                    const promises = [];\r\n\r\n                    this.entryId = this.entryId || result.newentryid;\r\n\r\n                    promises.push(this.dataProvider.invalidateEntryData(this.data.id, this.entryId, this.siteId));\r\n                    promises.push(this.dataProvider.invalidateEntriesData(this.data.id, this.siteId));\r\n\r\n                    return Promise.all(promises).then(() => {\r\n                        this.eventsProvider.trigger(AddonModDataProvider.ENTRY_CHANGED,\r\n                            { dataId: this.data.id, entryId: this.entryId } , this.siteId);\r\n                    }).finally(() => {\r\n                        return this.returnToEntryList();\r\n                    });\r\n                } else {\r\n                    this.errors = {};\r\n                    if (result.fieldnotifications) {\r\n                        result.fieldnotifications.forEach((fieldNotif) => {\r\n                            const field = this.fieldsArray.find((field) => field.name == fieldNotif.fieldname);\r\n                            if (field) {\r\n                                this.errors[field.id] = fieldNotif.notification;\r\n                            }\r\n                        });\r\n                    }\r\n                    this.jsData['errors'] = this.errors;\r\n\r\n                    setTimeout(() => {\r\n                        this.scrollToFirstError();\r\n                    });\r\n                }\r\n            }).finally(() => {\r\n                modal.dismiss();\r\n            });\r\n        }).catch((error) => {\r\n            this.domUtils.showErrorModalDefault(error, 'Cannot edit entry', true);\r\n\r\n            return Promise.reject(null);\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * Set group to see the database.\r\n     *\r\n     * @param  {number}       groupId Group identifier to set.\r\n     * @return {Promise<any>}         Resolved when done.\r\n     */\r\n    setGroup(groupId: number): Promise<any> {\r\n        this.selectedGroup = groupId;\r\n        this.loaded = false;\r\n\r\n        return this.fetchEntryData();\r\n    }\r\n\r\n    /**\r\n     * Displays Edit Search Fields.\r\n     *\r\n     * @return {string}  Generated HTML.\r\n     */\r\n    protected displayEditFields(): string {\r\n        if (!this.data.addtemplate) {\r\n            return '';\r\n        }\r\n\r\n        this.jsData = {\r\n            fields: this.fields,\r\n            contents: this.entry.contents,\r\n            form: this.editForm,\r\n            data: this.data,\r\n            errors: this.errors\r\n        };\r\n\r\n        let replace,\r\n            render,\r\n            template = this.data.addtemplate;\r\n\r\n        // Replace the fields found on template.\r\n        this.fieldsArray.forEach((field) => {\r\n            replace = '[[' + field.name + ']]';\r\n            replace = replace.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\r\n            replace = new RegExp(replace, 'gi');\r\n\r\n            // Replace field by a generic directive.\r\n            render = '<addon-mod-data-field-plugin mode=\"edit\" [field]=\"fields[' + field.id + ']\"\\\r\n                [value]=\"contents[' + field.id + ']\" [form]=\"form\" [database]=\"data\" [error]=\"errors[' + field.id + ']\">\\\r\n                </addon-mod-data-field-plugin>';\r\n            template = template.replace(replace, render);\r\n\r\n            // Replace the field id tag.\r\n            replace = '[[' + field.name + '#id]]';\r\n            replace = replace.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\r\n            replace = new RegExp(replace, 'gi');\r\n\r\n            template = template.replace(replace, 'field_' + field.id);\r\n        });\r\n\r\n        return template;\r\n    }\r\n\r\n    /**\r\n     * Return to the entry list (previous page) discarding temp data.\r\n     *\r\n     * @return {Promise<any>}  Resolved when done.\r\n     */\r\n    protected returnToEntryList(): Promise<any> {\r\n        const inputData = this.editForm.value;\r\n\r\n        return this.dataHelper.getEditTmpFiles(inputData, this.fieldsArray, this.data.id,\r\n                this.entry.contents).then((files) => {\r\n            this.fileUploaderProvider.clearTmpFiles(files);\r\n        }).finally(() => {\r\n            // Go back to entry list.\r\n            this.forceLeave = true;\r\n            this.navCtrl.pop();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Scroll to first error or to the top if not found.\r\n     */\r\n    protected scrollToFirstError(): void {\r\n        if (!this.domUtils.scrollToElementBySelector(this.content, '.addon-data-error')) {\r\n            this.domUtils.scrollToTop(this.content);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/data/pages/edit/edit.ts"],"sourceRoot":""}