{"version":3,"sources":["../../src/addon/mod/glossary/pages/entry/entry.module.ts","../../src/addon/mod/glossary/pages/entry/entry.ts"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AAAA,sCAAsC;AACtC,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,iDAAiD;AACjD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;;;;;AAEQ;AACO;AACM;AACe;AACA;AACf;AACF;AAcpD;IAAA;IAAgD,CAAC;IAApC,iCAAiC;QAZ7C,uEAAQ,CAAC;YACN,YAAY,EAAE;gBACV,yEAAyB;aAC5B;YACD,OAAO,EAAE;gBACL,2FAAoB;gBACpB,2FAAoB;gBACpB,4EAAe;gBACf,sEAAe,CAAC,QAAQ,CAAC,yEAAyB,CAAC;gBACnD,4EAAe,CAAC,QAAQ,EAAE;aAC7B;SACJ,CAAC;OACW,iCAAiC,CAAG;IAAD,wCAAC;CAAA;AAAH;;;;;;;;;;;;;AClC9C;AAAA,sCAAsC;AACtC,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,iDAAiD;AACjD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;;;;;;;;;;AAES;AACA;AACkB;AACQ;AAEpE;;GAEG;AAMH;IAWI,mCAAY,SAAoB,EAChB,QAA8B,EAC9B,gBAA0C;QAD1C,aAAQ,GAAR,QAAQ,CAAsB;QAC9B,qBAAgB,GAAhB,gBAAgB,CAA0B;QAZ1D,cAAS,GAAG,qFAAwB,CAAC,SAAS,CAAC;QAG/C,WAAM,GAAG,KAAK,CAAC;QACf,eAAU,GAAG,KAAK,CAAC;QACnB,aAAQ,GAAG,KAAK,CAAC;QAQb,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAC1C,IAAI,CAAC,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IAC5C,CAAC;IAED;;OAEG;IACH,kDAAc,GAAd;QAAA,iBAMC;QALG,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,CAAC;YACnB,KAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,KAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACtD,CAAC,CAAC,CAAC,OAAO,CAAC;YACP,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACvB,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;;;OAKG;IACF,6CAAS,GAAT,UAAU,SAAe;QAAzB,iBAQA;QAPG,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC;YAC9D,iBAAiB;QACrB,CAAC,CAAC,CAAC,IAAI,CAAC;YACJ,MAAM,CAAC,KAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC,OAAO,CAAC;YACP,SAAS,IAAI,SAAS,CAAC,QAAQ,EAAE,CAAC;QACtC,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;;;OAKG;IACO,8CAAU,GAApB,UAAqB,OAAiB;QAAtC,iBA8BC;QA7BG,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAC,MAAM;YAC5D,KAAI,CAAC,KAAK,GAAG,MAAM,CAAC;YAEpB,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;gBACX,qBAAqB;gBACrB,MAAM,CAAC,KAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,KAAI,CAAC,QAAQ,EAAE,KAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;oBAC7F,KAAI,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAY,CAAC;oBAEzC,MAAM,CAAC,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;wBAC7B,KAAK,gBAAgB,CAAC;wBACtB,KAAK,cAAc;4BACf,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;4BACvB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;4BACrB,KAAK,CAAC;wBACV,KAAK,mBAAmB;4BACpB,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;4BACxB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;4BACrB,KAAK,CAAC;wBACV,QAAS,mDAAmD;4BACxD,KAAI,CAAC,UAAU,GAAG,KAAK,CAAC;4BACxB,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;oBAC9B,CAAC;gBACL,CAAC,CAAC,CAAC;YACP,CAAC;QACL,CAAC,CAAC,CAAC,KAAK,CAAC,UAAC,KAAK;YACX,KAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,KAAK,EAAE,sCAAsC,EAAE,IAAI,CAAC,CAAC;YAEzF,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACP,CAAC;IAjFQ,yBAAyB;QAJrC,wEAAS,CAAC;YACP,QAAQ,EAAE,+BAA+B;WAChB;SAC5B,CAAC;+FAYkC;YACN,qFAAoB;YACZ,sBAAwB;OAbjD,yBAAyB,CAkFrC;IAAD,CAAC;AAAA;SAlFY,wB","file":"77.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CoreComponentsModule } from '@components/components.module';\r\nimport { CoreDirectivesModule } from '@directives/directives.module';\r\nimport { CorePipesModule } from '@pipes/pipes.module';\r\nimport { AddonModGlossaryEntryPage } from './entry';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AddonModGlossaryEntryPage,\r\n    ],\r\n    imports: [\r\n        CoreComponentsModule,\r\n        CoreDirectivesModule,\r\n        CorePipesModule,\r\n        IonicPageModule.forChild(AddonModGlossaryEntryPage),\r\n        TranslateModule.forChild()\r\n    ],\r\n})\r\nexport class AddonModForumDiscussionPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/glossary/pages/entry/entry.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavParams } from 'ionic-angular';\r\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\r\nimport { AddonModGlossaryProvider } from '../../providers/glossary';\r\n\r\n/**\r\n * Page that displays a glossary entry.\r\n */\r\n@IonicPage({ segment: 'addon-mod-glossary-entry' })\r\n@Component({\r\n    selector: 'page-addon-mod-glossary-entry',\r\n    templateUrl: 'entry.html',\r\n})\r\nexport class AddonModGlossaryEntryPage {\r\n    component = AddonModGlossaryProvider.COMPONENT;\r\n    componentId: number;\r\n    entry: any;\r\n    loaded = false;\r\n    showAuthor = false;\r\n    showDate = false;\r\n\r\n    protected courseId: number;\r\n    protected entryId: number;\r\n\r\n    constructor(navParams: NavParams,\r\n            private domUtils: CoreDomUtilsProvider,\r\n            private glossaryProvider: AddonModGlossaryProvider) {\r\n        this.courseId = navParams.get('courseId');\r\n        this.entryId = navParams.get('entryId');\r\n    }\r\n\r\n    /**\r\n     * View loaded.\r\n     */\r\n    ionViewDidLoad(): void {\r\n        this.fetchEntry().then(() => {\r\n            this.glossaryProvider.logEntryView(this.entry.id);\r\n        }).finally(() => {\r\n            this.loaded = true;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Refresh the data.\r\n     *\r\n     * @param {any} [refresher] Refresher.\r\n     * @return {Promise<any>} Promise resolved when done.\r\n     */\r\n     doRefresh(refresher?: any): Promise<any> {\r\n        return this.glossaryProvider.invalidateEntry(this.entry.id).catch(() => {\r\n            // Ignore errors.\r\n        }).then(() => {\r\n            return this.fetchEntry(true);\r\n        }).finally(() => {\r\n            refresher && refresher.complete();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Convenience function to get the glossary entry.\r\n     *\r\n     * @param {boolean} [refresh] Whether we're refreshing data.\r\n     * @return {Promise<any>} Promise resolved when done.\r\n     */\r\n    protected fetchEntry(refresh?: boolean): Promise<any> {\r\n        return this.glossaryProvider.getEntry(this.entryId).then((result) => {\r\n            this.entry = result;\r\n\r\n            if (!refresh) {\r\n                // Load the glossary.\r\n                return this.glossaryProvider.getGlossaryById(this.courseId, this.entry.glossaryid).then((glossary) => {\r\n                    this.componentId = glossary.coursemodule;\r\n\r\n                    switch (glossary.displayformat) {\r\n                        case 'fullwithauthor':\r\n                        case 'encyclopedia':\r\n                            this.showAuthor = true;\r\n                            this.showDate = true;\r\n                            break;\r\n                        case 'fullwithoutauthor':\r\n                            this.showAuthor = false;\r\n                            this.showDate = true;\r\n                            break;\r\n                        default: // Default, and faq, simple, entrylist, continuous.\r\n                            this.showAuthor = false;\r\n                            this.showDate = false;\r\n                    }\r\n                });\r\n            }\r\n        }).catch((error) => {\r\n            this.domUtils.showErrorModalDefault(error, 'addon.mod_glossary.errorloadingentry', true);\r\n\r\n            return Promise.reject(null);\r\n        });\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/addon/mod/glossary/pages/entry/entry.ts"],"sourceRoot":""}