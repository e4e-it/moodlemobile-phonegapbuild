{"version":3,"sources":["../../src/core/login/pages/forgotten-password/forgotten-password.module.ts","../../src/core/login/pages/forgotten-password/forgotten-password.ts"],"names":[],"mappings":"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","file":"31.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CoreDirectivesModule } from '@directives/directives.module';\r\nimport { CoreLoginForgottenPasswordPage } from './forgotten-password';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        CoreLoginForgottenPasswordPage\r\n    ],\r\n    imports: [\r\n        CoreDirectivesModule,\r\n        IonicPageModule.forChild(CoreLoginForgottenPasswordPage),\r\n        TranslateModule.forChild()\r\n    ]\r\n})\r\nexport class CoreLoginForgottenPasswordPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/login/pages/forgotten-password/forgotten-password.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\r\nimport { CoreLoginHelperProvider } from '../../providers/helper';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\n\r\n/**\r\n * Page to recover a forgotten password.\r\n */\r\n@IonicPage({ segment: 'core-login-forgotten-password' })\r\n@Component({\r\n    selector: 'page-core-login-forgotten-password',\r\n    templateUrl: 'forgotten-password.html',\r\n})\r\nexport class CoreLoginForgottenPasswordPage {\r\n    myForm: FormGroup;\r\n    siteUrl: string;\r\n\r\n    constructor(private navCtrl: NavController, navParams: NavParams, fb: FormBuilder, private translate: TranslateService,\r\n            private loginHelper: CoreLoginHelperProvider, private domUtils: CoreDomUtilsProvider) {\r\n\r\n        this.siteUrl = navParams.get('siteUrl');\r\n        this.myForm = fb.group({\r\n            field: ['username', Validators.required],\r\n            value: [navParams.get('username') || '', Validators.required]\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Request to reset the password.\r\n     */\r\n    resetPassword(): void {\r\n        const field = this.myForm.value.field,\r\n            value = this.myForm.value.value;\r\n\r\n        if (!value) {\r\n            this.domUtils.showErrorModal('core.login.usernameoremail', true);\r\n\r\n            return;\r\n        }\r\n\r\n        const modal = this.domUtils.showModalLoading('core.sending', true),\r\n            isMail = field == 'email';\r\n\r\n        this.loginHelper.requestPasswordReset(this.siteUrl, isMail ? '' : value, isMail ? value : '').then((response) => {\r\n            if (response.status == 'dataerror') {\r\n                // Error in the data sent.\r\n                this.showError(isMail, response.warnings);\r\n            } else if (response.status == 'emailpasswordconfirmnotsent' || response.status == 'emailpasswordconfirmnoemail') {\r\n                // Error, not found.\r\n                this.domUtils.showErrorModal(response.notice);\r\n            } else {\r\n                // Success.\r\n                this.domUtils.showAlert(this.translate.instant('core.success'), response.notice);\r\n                this.navCtrl.pop();\r\n            }\r\n        }).catch((error) => {\r\n            this.domUtils.showErrorModal(error.error);\r\n        }).finally(() => {\r\n            modal.dismiss();\r\n        });\r\n    }\r\n\r\n    // Show an error from the warnings.\r\n    protected showError(isMail: boolean, warnings: any[]): void {\r\n        for (let i = 0; i < warnings.length; i++) {\r\n            const warning = warnings[i];\r\n            if ((warning.item == 'email' && isMail) || (warning.item == 'username' && !isMail)) {\r\n                this.domUtils.showErrorModal(warning.message);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/login/pages/forgotten-password/forgotten-password.ts"],"sourceRoot":""}