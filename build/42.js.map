{"version":3,"sources":["../../src/core/courses/pages/my-courses/my-courses.module.ts","../../src/core/courses/pages/my-courses/my-courses.ts"],"names":[],"mappings":"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","file":"42.js","sourcesContent":["// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { CoreCoursesMyCoursesPage } from './my-courses';\r\nimport { CoreComponentsModule } from '@components/components.module';\r\nimport { CoreDirectivesModule } from '@directives/directives.module';\r\nimport { CoreCoursesComponentsModule } from '../../components/components.module';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        CoreCoursesMyCoursesPage,\r\n    ],\r\n    imports: [\r\n        CoreComponentsModule,\r\n        CoreDirectivesModule,\r\n        CoreCoursesComponentsModule,\r\n        IonicPageModule.forChild(CoreCoursesMyCoursesPage),\r\n        TranslateModule.forChild()\r\n    ],\r\n})\r\nexport class CoreCoursesMyCoursesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/courses/pages/my-courses/my-courses.module.ts","// (C) Copyright 2015 Martin Dougiamas\r\n//\r\n// Licensed under the Apache License, Version 2.0 (the \"License\");\r\n// you may not use this file except in compliance with the License.\r\n// You may obtain a copy of the License at\r\n//\r\n//     http://www.apache.org/licenses/LICENSE-2.0\r\n//\r\n// Unless required by applicable law or agreed to in writing, software\r\n// distributed under the License is distributed on an \"AS IS\" BASIS,\r\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n// See the License for the specific language governing permissions and\r\n// limitations under the License.\r\n\r\nimport { Component, OnDestroy, ViewChild } from '@angular/core';\r\nimport { IonicPage, Searchbar, NavController } from 'ionic-angular';\r\nimport { CoreEventsProvider } from '@providers/events';\r\nimport { CoreSitesProvider } from '@providers/sites';\r\nimport { CoreDomUtilsProvider } from '@providers/utils/dom';\r\nimport { CoreCoursesProvider } from '../../providers/courses';\r\nimport { CoreCoursesHelperProvider } from '../../providers/helper';\r\nimport { CoreCourseHelperProvider } from '@core/course/providers/helper';\r\nimport { CoreCourseOptionsDelegate } from '@core/course/providers/options-delegate';\r\n\r\n/**\r\n * Page that displays the list of courses the user is enrolled in.\r\n */\r\n@IonicPage({ segment: 'core-courses-my-courses' })\r\n@Component({\r\n    selector: 'page-core-courses-my-courses',\r\n    templateUrl: 'my-courses.html',\r\n})\r\nexport class CoreCoursesMyCoursesPage implements OnDestroy {\r\n    @ViewChild('searchbar') searchbar: Searchbar;\r\n\r\n    courses: any[];\r\n    filteredCourses: any[];\r\n    searchEnabled: boolean;\r\n    filter = '';\r\n    showFilter = false;\r\n    coursesLoaded = false;\r\n    prefetchCoursesData: any = {};\r\n    downloadAllCoursesEnabled: boolean;\r\n\r\n    protected prefetchIconInitialized = false;\r\n    protected myCoursesObserver;\r\n    protected siteUpdatedObserver;\r\n    protected isDestroyed = false;\r\n    protected courseIds = '';\r\n\r\n    constructor(private navCtrl: NavController, private coursesProvider: CoreCoursesProvider,\r\n            private domUtils: CoreDomUtilsProvider, private eventsProvider: CoreEventsProvider,\r\n            private sitesProvider: CoreSitesProvider, private courseHelper: CoreCourseHelperProvider,\r\n            private courseOptionsDelegate: CoreCourseOptionsDelegate, private coursesHelper: CoreCoursesHelperProvider) { }\r\n\r\n    /**\r\n     * View loaded.\r\n     */\r\n    ionViewDidLoad(): void {\r\n        this.searchEnabled = !this.coursesProvider.isSearchCoursesDisabledInSite();\r\n        this.downloadAllCoursesEnabled = !this.coursesProvider.isDownloadCoursesDisabledInSite();\r\n\r\n        this.fetchCourses().finally(() => {\r\n            this.coursesLoaded = true;\r\n        });\r\n\r\n        this.myCoursesObserver = this.eventsProvider.on(CoreCoursesProvider.EVENT_MY_COURSES_UPDATED, () => {\r\n            this.fetchCourses();\r\n        }, this.sitesProvider.getCurrentSiteId());\r\n\r\n        // Refresh the enabled flags if site is updated.\r\n        this.siteUpdatedObserver = this.eventsProvider.on(CoreEventsProvider.SITE_UPDATED, () => {\r\n            const wasEnabled = this.downloadAllCoursesEnabled;\r\n\r\n            this.searchEnabled = !this.coursesProvider.isSearchCoursesDisabledInSite();\r\n            this.downloadAllCoursesEnabled = !this.coursesProvider.isDownloadCoursesDisabledInSite();\r\n\r\n            if (!wasEnabled && this.downloadAllCoursesEnabled && this.coursesLoaded) {\r\n                // Download all courses is enabled now, initialize it.\r\n                this.initPrefetchCoursesIcon();\r\n            }\r\n        }, this.sitesProvider.getCurrentSiteId());\r\n    }\r\n\r\n    /**\r\n     * Fetch the user courses.\r\n     *\r\n     * @return {Promise<any>} Promise resolved when done.\r\n     */\r\n    protected fetchCourses(): Promise<any> {\r\n        return this.coursesProvider.getUserCourses().then((courses) => {\r\n            const promises = [],\r\n                courseIds = courses.map((course) => {\r\n                return course.id;\r\n            });\r\n\r\n            this.courseIds = courseIds.join(',');\r\n\r\n            promises.push(this.coursesHelper.loadCoursesExtraInfo(courses));\r\n\r\n            if (this.coursesProvider.canGetAdminAndNavOptions()) {\r\n                promises.push(this.coursesProvider.getCoursesAdminAndNavOptions(courseIds).then((options) => {\r\n                    courses.forEach((course) => {\r\n                        course.navOptions = options.navOptions[course.id];\r\n                        course.admOptions = options.admOptions[course.id];\r\n                    });\r\n                }));\r\n            }\r\n\r\n            return Promise.all(promises).then(() => {\r\n                this.courses = courses;\r\n                this.filteredCourses = this.courses;\r\n                this.filter = '';\r\n\r\n                this.initPrefetchCoursesIcon();\r\n            });\r\n        }).catch((error) => {\r\n            this.domUtils.showErrorModalDefault(error, 'core.courses.errorloadcourses', true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Refresh the courses.\r\n     *\r\n     * @param {any} refresher Refresher.\r\n     */\r\n    refreshCourses(refresher: any): void {\r\n        const promises = [];\r\n\r\n        promises.push(this.coursesProvider.invalidateUserCourses());\r\n        promises.push(this.courseOptionsDelegate.clearAndInvalidateCoursesOptions());\r\n        if (this.courseIds) {\r\n            promises.push(this.coursesProvider.invalidateCoursesByField('ids', this.courseIds));\r\n        }\r\n\r\n        Promise.all(promises).finally(() => {\r\n\r\n            this.prefetchIconInitialized = false;\r\n            this.fetchCourses().finally(() => {\r\n                refresher.complete();\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Show or hide the filter.\r\n     */\r\n    switchFilter(): void {\r\n        this.filter = '';\r\n        this.showFilter = !this.showFilter;\r\n        this.filteredCourses = this.courses;\r\n        if (this.showFilter) {\r\n            setTimeout(() => {\r\n                this.searchbar.setFocus();\r\n            }, 500);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Go to search courses.\r\n     */\r\n    openSearch(): void {\r\n        this.navCtrl.push('CoreCoursesSearchPage');\r\n    }\r\n\r\n    /**\r\n     * The filter has changed.\r\n     *\r\n     * @param {any} Received Event.\r\n     */\r\n    filterChanged(event: any): void {\r\n        const newValue = event.target.value && event.target.value.trim().toLowerCase();\r\n        if (!newValue || !this.courses) {\r\n            this.filteredCourses = this.courses;\r\n        } else {\r\n            this.filteredCourses = this.courses.filter((course) => {\r\n                return course.fullname.toLowerCase().indexOf(newValue) > -1;\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Prefetch all the courses.\r\n     *\r\n     * @return {Promise<any>} Promise resolved when done.\r\n     */\r\n    prefetchCourses(): Promise<any> {\r\n        const initialIcon = this.prefetchCoursesData.icon;\r\n\r\n        this.prefetchCoursesData.icon = 'spinner';\r\n        this.prefetchCoursesData.badge = '';\r\n\r\n        return this.courseHelper.confirmAndPrefetchCourses(this.courses, (progress) => {\r\n            this.prefetchCoursesData.badge = progress.count + ' / ' + progress.total;\r\n        }).then(() => {\r\n            this.prefetchCoursesData.icon = 'ion-android-refresh';\r\n        }).catch((error) => {\r\n            if (!this.isDestroyed) {\r\n                this.domUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\r\n                this.prefetchCoursesData.icon = initialIcon;\r\n            }\r\n        }).finally(() => {\r\n            this.prefetchCoursesData.badge = '';\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Initialize the prefetch icon for the list of courses.\r\n     */\r\n    protected initPrefetchCoursesIcon(): void {\r\n        if (this.prefetchIconInitialized || !this.downloadAllCoursesEnabled) {\r\n            // Already initialized.\r\n            return;\r\n        }\r\n\r\n        this.prefetchIconInitialized = true;\r\n\r\n        if (!this.courses || this.courses.length < 2) {\r\n            // Not enough courses.\r\n            this.prefetchCoursesData.icon = '';\r\n\r\n            return;\r\n        }\r\n\r\n        this.courseHelper.determineCoursesStatus(this.courses).then((status) => {\r\n            let icon = this.courseHelper.getCourseStatusIconAndTitleFromStatus(status).icon;\r\n            if (icon == 'spinner') {\r\n                // It seems all courses are being downloaded, show a download button instead.\r\n                icon = 'cloud-download';\r\n            }\r\n            this.prefetchCoursesData.icon = icon;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Page destroyed.\r\n     */\r\n    ngOnDestroy(): void {\r\n        this.isDestroyed = true;\r\n        this.myCoursesObserver && this.myCoursesObserver.off();\r\n        this.siteUpdatedObserver && this.siteUpdatedObserver.off();\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/courses/pages/my-courses/my-courses.ts"],"sourceRoot":""}